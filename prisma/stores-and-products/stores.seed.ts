import { PrismaClient, UserType } from '@prisma/client';

// ÌåêÎß§Ïûê Ïú†Ï†Ä
const BUSINESS_USERS = [
  {
    name: 'ÌåêÎß§Ïûê1',
    user_type: UserType.BUSINESS,
    phonenumber: '01012345678',
    profile: null,
    kakao_client_id: null,
    admin_email: null,
    admin_password: null,
  },
  {
    name: 'ÌåêÎß§Ïûê2',
    user_type: UserType.BUSINESS,
    phonenumber: '01012344321',
    profile: null,
    kakao_client_id: null,
    admin_email: null,
    admin_password: null,
  },
  {
    name: 'ÌåêÎß§Ïûê3',
    user_type: UserType.BUSINESS,
    phonenumber: '01012348765',
    profile: null,
    kakao_client_id: null,
    admin_email: null,
    admin_password: null,
  },
  {
    name: 'ÌåêÎß§Ïûê4',
    user_type: UserType.BUSINESS,
    phonenumber: '01012344567',
    profile: null,
    kakao_client_id: null,
    admin_email: null,
    admin_password: null,
  },
  {
    name: 'ÌåêÎß§Ïûê5',
    user_type: UserType.BUSINESS,
    phonenumber: '01012346789',
    profile: null,
    kakao_client_id: null,
    admin_email: null,
    admin_password: null,
  },
] as const;

// Í∞ÄÍ≤å
const STORES = [
  {
    // store_id = 1
    name: 'Ïä§Ïõ®Ïù¥Îìú Î≤†Ïù¥Ïª§Î¶¨ Ï≤≠Îã¥',
    business_number: '0123456789', // 10ÏûêÎ¶¨ (000-00-00000)
    address: 'ÏÑúÏö∏ Í∞ïÎÇ®Íµ¨ ÎèÑÏÇ∞ÎåÄÎ°ú62Í∏∏ 26 1Ï∏µ',
    phonenumber: '050714494422', // 0507-1448-4422
    contact_url: 'https://www.instagram.com/suede.bakery',
    user_id: BigInt(1),
  },
  {
    // store_id = 2
    name: 'ÎèôÍµ¨Î¶¨ Ï†úÍ≥º',
    business_number: '1234567890', // 10ÏûêÎ¶¨ (000-00-00000)
    address: 'Í≤ΩÍ∏∞ ÏïàÏÇ∞Ïãú ÏÉÅÎ°ùÍµ¨ Î∞ïÏö∞Î¨ºÎ°ú 26 Ï§ëÏïôÎπåÎî© 1Ï∏µ',
    phonenumber: '07080188920', // 070-8018-8920
    user_id: BigInt(2),
  },
  {
    // store_id = 3
    name: 'ÏºÄÏù¥ÌÅ¨Ïñå',
    business_number: '1231212345', // 10ÏûêÎ¶¨ (000-00-00000)
    address: 'Ï†ÑÎÇ® Í¥ëÏñëÏãú Í¥ëÏñëÏùç Ïπ†ÏÑ±Î¶¨ 36-11',
    phonenumber: '050713049179', // 0507-1304-9179
    contact_url: 'https://pf.kakao.com/_zDxjcb',
    user_id: BigInt(3),
  },
  {
    // store_id = 4
    name: 'ÎùºÎ∂ÄÏïÑÎú®Ïóò',
    business_number: '3213254321', // 10ÏûêÎ¶¨ (000-00-00000)
    address: 'ÎåÄÍµ¨ ÏàòÏÑ±Íµ¨ ÏßÄÎ≤îÎ°ú 248-6 1Ï∏µ',
    phonenumber: '050714840458', // 0507-1484-0458
    contact_url: 'https://pf.kakao.com/_xoxjmyG',
    user_id: BigInt(4),
  },
  {
    // store_id = 5
    name: 'Ìè¨Ïä§Ìä∏ ÏºÄÏù¥ÌÅ¨',
    business_number: '0987654321', // 10ÏûêÎ¶¨ (000-00-00000)
    address: 'ÏÑúÏö∏ ÎßàÌè¨Íµ¨ ÏõîÎìúÏªµÎ∂ÅÎ°ú16Í∏∏ 64 1Ï∏µ',
    phonenumber: '050714313782', // 0507-1431-3782
    contact_url: 'https://www.instagram.com/postcake_official',
    user_id: BigInt(5),
  },
] as const;

// ÏòÅÏóÖÏãúÍ∞Ñ 7Ïùº
// time-slot.seed.tsÍ∞Ä ÏÇ¨Ï†ÑÏóê Îç∞Ïù¥ÌÑ∞ÏÖãÏù¥ ÎêòÏñ¥ÏïºÌï®.
const BUSINNESS_OPERATIONS = [
  // Ïä§Ïõ®Ïù¥ÎìúÎ≤†Ïù¥Ïª§Î¶¨(store_id = 1)
  {
    store_id: BigInt(1),
    day_of_week: 0, // Ïõî
    day_off: false,
    open_time_at: 21, // 10:00
    close_time_at: 41, // 20:00
  },
  {
    store_id: BigInt(1),
    day_of_week: 1, // Ìôî
    day_off: true,
  },
  {
    store_id: BigInt(1),
    day_of_week: 2, // Ïàò
    day_off: false,
    open_time_at: 21, // 10:00
    close_time_at: 41, // 20:00
  },
  {
    store_id: BigInt(1),
    day_of_week: 3, // Î™©
    day_off: false,
    open_time_at: 21, // 10:00
    close_time_at: 41, // 20:00
  },
  {
    store_id: BigInt(1),
    day_of_week: 4, // Í∏à
    day_off: false,
    open_time_at: 21, // 10:00
    close_time_at: 41, // 20:00
  },
  {
    store_id: BigInt(1),
    day_of_week: 5, // ÌÜ†
    day_off: false,
    open_time_at: 21, // 10:00
    close_time_at: 41, // 20:00
  },
  {
    store_id: BigInt(1),
    day_of_week: 6, // Ïùº
    day_off: false,
    open_time_at: 21, // 10:00
    close_time_at: 41, // 20:00
  },

  // ÎèôÍµ¨Î¶¨Ï†úÍ≥º(store_id = 2)
  {
    store_id: BigInt(2),
    day_of_week: 0, // Ïõî
    day_off: false,
    open_time_at: 19, // 09:00
    close_time_at: 39, // 19:00
  },
  {
    store_id: BigInt(2),
    day_of_week: 1, // Ìôî
    day_off: false,
    open_time_at: 19, // 09:00
    close_time_at: 39, // 19:00
  },
  {
    store_id: BigInt(2),
    day_of_week: 2, // Ïàò
    day_off: false,
    open_time_at: 19, // 09:00
    close_time_at: 39, // 19:00
  },
  {
    store_id: BigInt(2),
    day_of_week: 3, // Î™©
    day_off: false,
    open_time_at: 19, // 09:00
    close_time_at: 39, // 19:00
  },
  {
    store_id: BigInt(2),
    day_of_week: 4, // Í∏à
    day_off: false,
    open_time_at: 19, // 09:00
    close_time_at: 39, // 19:00
  },
  {
    store_id: BigInt(2),
    day_of_week: 5, // ÌÜ†
    day_off: true,
  },
  {
    store_id: BigInt(2),
    day_of_week: 6, // Ïùº
    day_off: true,
  },
  // ÏºÄÏù¥ÌÅ¨Ïñå (store_id = 3)
  {
    store_id: BigInt(3),
    day_of_week: 0, // Ïõî
    day_off: false,
    open_time_at: 23, // 11:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(3),
    day_of_week: 1, // Ìôî
    day_off: false,
    open_time_at: 23, // 11:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(3),
    day_of_week: 2, // Ïàò
    day_off: false,
    open_time_at: 23, // 11:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(3),
    day_of_week: 3, // Î™©
    day_off: false,
    open_time_at: 23, // 11:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(3),
    day_of_week: 4, // Í∏à
    day_off: false,
    open_time_at: 23, // 11:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(3),
    day_of_week: 5, // ÌÜ†
    day_off: false,
    open_time_at: 23, // 11:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(3),
    day_of_week: 6, // Ïùº
    day_off: false,
    open_time_at: 23, // 11:00
    close_time_at: 45, // 22:00
  },
  // ÎùºÎ∂ÄÏïÑÎú®Ïóò (store_id = 4)
  {
    store_id: BigInt(4),
    day_of_week: 0, // Ïõî
    day_off: false,
    open_time_at: 17, // 08:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(4),
    day_of_week: 1, // Ìôî
    day_off: false,
    open_time_at: 17, // 08:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(4),
    day_of_week: 2, // Ïàò
    day_off: false,
    open_time_at: 17, // 08:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(4),
    day_of_week: 3, // Î™©
    day_off: false,
    open_time_at: 17, // 08:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(4),
    day_of_week: 4, // Í∏à
    day_off: false,
    open_time_at: 17, // 08:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(4),
    day_of_week: 5, // ÌÜ†
    day_off: false,
    open_time_at: 17, // 08:00
    close_time_at: 45, // 22:00
  },
  {
    store_id: BigInt(4),
    day_of_week: 6, // Ïùº
    day_off: false,
    open_time_at: 17, // 08:00
    close_time_at: 45, // 22:00
  },
  // Ìè¨Ïä§Ìä∏ÏºÄÏù¥ÌÅ¨ (store_id = 5)
  {
    store_id: BigInt(5),
    day_of_week: 0, // Ïõî
    day_off: true,
  },
  {
    store_id: BigInt(5),
    day_of_week: 1, // Ìôî
    day_off: false,
    open_time_at: 25, // 12:00
    close_time_at: 38, // 18:30
  },
  {
    store_id: BigInt(5),
    day_of_week: 2, // Ïàò
    day_off: false,
    open_time_at: 25, // 12:00
    close_time_at: 38, // 18:30
  },
  {
    store_id: BigInt(5),
    day_of_week: 3, // Î™©
    day_off: false,
    open_time_at: 25, // 12:00
    close_time_at: 38, // 18:30
  },
  {
    store_id: BigInt(5),
    day_of_week: 4, // Í∏à
    day_off: false,
    open_time_at: 25, // 12:00
    close_time_at: 38, // 18:30
  },
  {
    store_id: BigInt(5),
    day_of_week: 5, // ÌÜ†
    day_off: false,
    open_time_at: 25, // 12:00
    close_time_at: 38, // 18:30
  },
  {
    store_id: BigInt(5),
    day_of_week: 6, // Ïùº
    day_off: true,
  },
] as const;

async function seedBusinessUsers(prisma: PrismaClient) {
  console.log('üå± Users: ÌåêÎß§Ïûê Ïú†Ï†Ä seed Îç∞Ïù¥ÌÑ∞ ÏÇΩÏûÖÏ§ë...');
  const existingUsers = await prisma.users.count({
    where: { user_type: UserType.BUSINESS },
  });

  if (existingUsers > 0) {
    console.log('‚è≠Ô∏è  Ïù¥ÎØ∏ ÌåêÎß§Ïûê Ïú†Ï†Ä Îç∞Ïù¥ÌÑ∞Í∞Ä Ï°¥Ïû¨ÌïòÏó¨ Í±¥ÎÑàÎúÅÎãàÎã§.');
    return;
  } else {
    await prisma.$transaction(async (tx) => {
      for (const user of BUSINESS_USERS) {
        await tx.users.create({ data: user });
      }
    });
    console.log(
      `‚úÖ Users: ${BUSINESS_USERS.length} Í∞úÏùò ÌåêÎß§Ïûê Ïú†Ï†ÄÎç∞Ïù¥ÌÑ∞ Ï∂îÍ∞ÄÏôÑÎ£å`,
    );
  }
  console.log('‚úÖ Users(ÌåêÎß§ÏûêÏú†Ï†Ä) ÌÖåÏù¥Î∏î seeding ÏôÑÎ£å');
}

async function seedStores(prisma: PrismaClient) {
  console.log('üå± Stores: ÏÉÅÏ†ê seed Îç∞Ïù¥ÌÑ∞ ÏÇΩÏûÖÏ§ë...');
  const existingStores = await prisma.stores.count();

  if (existingStores > 0) {
    console.log('‚è≠Ô∏è  Ïù¥ÎØ∏ ÏÉÅÏ†ê Îç∞Ïù¥ÌÑ∞Í∞Ä Ï°¥Ïû¨ÌïòÏó¨ Í±¥ÎÑàÎúÅÎãàÎã§.');
    return;
  } else {
    await prisma.$transaction(async (tx) => {
      for (const store of STORES) {
        await tx.stores.create({ data: store });
      }
    });
    console.log(`‚úÖ Stores: ${STORES.length} Í∞úÏùò ÏÉÅÏ†ê Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞ÄÏôÑÎ£å`);
  }
  console.log('‚úÖ Stores ÌÖåÏù¥Î∏î seeding ÏôÑÎ£å');
}

async function seedBusinessOperations(prisma: PrismaClient) {
  console.log(
    'üå± BusinessOperations: ÏÉÅÏ†ê Ïö¥ÏòÅÏãúÍ∞Ñ Ï†ïÎ≥¥ seed Îç∞Ïù¥ÌÑ∞ ÏÇΩÏûÖÏ§ë...',
  );

  const timeSlotsCount = await prisma.timeSlots.count();
  if (timeSlotsCount === 0) {
    console.error('‚ùå TimeSlots Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§!');
    return;
  }

  const existingStores = await prisma.businessOperations.count();
  if (existingStores > 0) {
    console.log('‚è≠Ô∏è  Ïù¥ÎØ∏ ÏÉÅÏ†ê Ïö¥ÏòÅÏãúÍ∞Ñ Ï†ïÎ≥¥ Îç∞Ïù¥ÌÑ∞Í∞Ä Ï°¥Ïû¨ÌïòÏó¨ Í±¥ÎÑàÎúÅÎãàÎã§.');
    return;
  } else {
    await prisma.$transaction(async (tx) => {
      for (const bo of BUSINNESS_OPERATIONS) {
        if (bo.day_off) {
          // day_off ===  true ÏùºÍ≤ΩÏö∞
          await tx.businessOperations.create({
            data: {
              store_id: bo.store_id,
              day_of_week: bo.day_of_week,
              day_off: true,
            },
          });
        } else {
          // day_off ===  false ÏùºÍ≤ΩÏö∞
          await tx.businessOperations.create({
            data: {
              store_id: bo.store_id,
              day_of_week: bo.day_of_week,
              day_off: false,
              open_time_at: bo.open_time_at,
              close_time_at: bo.close_time_at,
            },
          });
        }
      }
    });
    console.log(
      `‚úÖ BusinessOperations: ${BUSINNESS_OPERATIONS.length} Í∞úÏùò ÏÉÅÏ†ê Ïö¥ÏòÅÏãúÍ∞Ñ Ï†ïÎ≥¥ Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞ÄÏôÑÎ£å`,
    );
  }
  console.log('‚úÖ BusinessOperations ÌÖåÏù¥Î∏î seeding ÏôÑÎ£å');
}

export default async function seed(prisma: PrismaClient) {
  // ÌåêÎß§Ïûê Ïú†Ï†Ä
  await seedBusinessUsers(prisma);

  // ÏÉÅÏ†ê
  await seedStores(prisma);

  // ÏÉÅÏ†ê Ïö¥ÏòÅÏãúÍ∞Ñ Ï†ïÎ≥¥
  await seedBusinessOperations(prisma);
}
